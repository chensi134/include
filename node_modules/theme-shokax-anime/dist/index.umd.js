!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).anime=e()}(this,(function(){"use strict";class t{constructor(){this.queue=[]}add(t){return this.queue.push(new r(t)),this}play(){this.queue.forEach((t=>t.play()))}}const e={targets:null,duration:1/0,easing:"linear",delay:0,begin:null,update:null,complete:null};var s=()=>{const t={linear:()=>t=>t},e={Sine:()=>t=>1-Math.cos(t*Math.PI/2),Expo:()=>t=>t?Math.pow(2,10*t-10):0,Circ:()=>t=>1-Math.sqrt(1-t*t),Back:()=>t=>t*t*(3*t-2),Bounce:()=>t=>{let e,s=4;for(;t<((e=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((3*e-2)/22-t,2)}};return["Quad","Cubic","Quart","Quint"].forEach(((t,s)=>{e[t]=()=>t=>Math.pow(t,s+2)})),Object.keys(e).forEach((s=>{const a=e[s];t["easeIn"+s]=a,t["easeOut"+s]=()=>t=>1-a()(1-t),t["easeInOut"+s]=()=>t=>t<.5?a()(2*t)/2:1-a()(-2*t+2)/2,t["easeOutIn"+s]=()=>t=>t<.5?(1-a()(1-2*t))/2:(a()(2*t-1)+1)/2})),t};const a=["translateX","translateY","translateZ"],n=(t,e)=>t instanceof HTMLElement?"transform"in t.style&&a.includes(e)?"transform":e in t.style?"style":"attribute":"attribute";class r{constructor(t=e){t={...e,...t};const{targets:s,duration:a,easing:n,delay:r,begin:o,update:i,complete:l,...u}=t;this.targets=s,this.duration=a,this.easing=n,this.delay=r,this.begin=o,this.update=i,this.complete=l,this.dest=u||{},this.tl=null,this.isPlay=!1}timeline(){return this.tl||(this.tl=new t),this.tl}play(){this.isPlay||(this.isPlay=!0,(t=>{const e=Date.now()+t.delay,a=e+t.duration,r=!!t.targets,o=[],i=(t,e,s,a,r,o=!1)=>{let i;if("string"==typeof a){if(i=a.endsWith("%")?"%":a.endsWith("px")?"px":null,!i)throw new TypeError("string value must ends with '%' or 'px'");a=parseFloat(a)}let l=o?a:(a-e)*s+e;i&&(l+=i);const u=n(t,r);"transform"===u?t.style.transform=`${r}(${l}${i?"":"px"})`:"style"===u?t.style[r]=l:t[r]=l},l=(a,n,r=!1)=>{t.targets.forEach(((l,u)=>{Object.keys(t.dest).forEach((f=>{let c=parseFloat(o[u][f]),h=t.dest[f];if("object"==typeof h)if(Array.isArray(h)){let o=0;for(;o<h.length&&n-e>=h[o].startTimeStamp;)o++;const{value:u,duration:p,easing:y=t.easing,startTimeStamp:d}=h[o-1];c=o<=1?c:h[o-2].value,n<=e+p+d?(a=s()[y]()((n-e-d)/p),i(l,c,a,u,f)):r&&i(l,c,a,u,f,r)}else{const{value:o,duration:u,easing:p=t.easing}=h;n<=e+u?(a=s()[p]()((n-e)/u),i(l,c,a,o,f)):r&&i(l,c,a,o,f,r)}else"function"==typeof h&&(h=h(l,u)),i(l,c,a,h,f,r)}))}))},u=()=>{const n=Date.now();if(n>a)l(1,n,!0),"function"==typeof t.complete&&t.complete(t.targets),t.isPlay=!1;else{if(n>=e){const a=s()[t.easing]()((n-e)/t.duration);r&&l(a,n),"function"==typeof t.update&&t.update(t.targets)}requestAnimationFrame(u)}};(()=>{if(r){Array.isArray(t.targets)||(t.targets=[t.targets]);for(const e of t.targets){const s={};for(const a in t.dest){const r=t.dest[a],o=n(e,a);if(Array.isArray(r))if(2===r.length&&"object"!=typeof r[0])"transform"===o?e.style.transform=`${a}(${"string"==typeof r[0]?r[0]:r[0]+"px"})`:"style"===o?e.style[a]=r[0]:e[a]=r[0],s[a]=r[0],t.dest[a]=r[1];else{let t=0;for(let e of r)e.startTimeStamp=t,t+=e.duration;s[a]=e[a]}else s[a]="transform"===o?e.style.transform.match(new RegExp(`${a}\\((\\w+)\\)`))[1]:"style"===o?e.style[a]:e[a]}o.push(s)}}})(),"function"==typeof t.begin&&t.begin(t.targets),u()})(this))}}const o=t=>new r(t);return o.random=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,o}));
