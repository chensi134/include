var UnLazy=function(a){"use strict";var L;const v="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",h=typeof window>"u",w=!h&&"loading"in HTMLImageElement.prototype,O=!h&&(!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));function S(e,t=document){return typeof e=="string"?[...t.querySelectorAll(e)]:e instanceof Element?[e]:[...e]}function C(e,t){let r;return function(...i){r&&clearTimeout(r),r=setTimeout(()=>{r=void 0,e(...i)},t)}}function z(e='img[loading="lazy"]',{hash:t=!0,hashType:r="blurhash",placeholderSize:i=32,updateSizesOnResize:n=!1,onImageLoad:c}={}){const o=new Set;for(const s of S(e)){const u=l(s,{updateOnResize:n});if(n&&u&&o.add(u),!s.dataset.src&&!s.dataset.srcset){(typeof __UNLAZY_LOGGING__>"u"||__UNLAZY_LOGGING__)&&console.error("[unlazy] Missing `data-src` or `data-srcset` attribute",s);continue}if(O||!w){_(s),E(s),A(s);continue}if(s.src||(s.src=v),s.complete&&s.naturalWidth>0){f(s,c);continue}const b=()=>f(s,c);s.addEventListener("load",b,{once:!0}),o.add(()=>s.removeEventListener("load",b))}return()=>{for(const s of o)s();o.clear()}}function y(e='img[data-sizes="auto"], source[data-sizes="auto"]'){for(const t of S(e))l(t)}function f(e,t){var s;if(((s=e.parentElement)==null?void 0:s.tagName.toLowerCase())==="picture"){_(e),E(e),A(e),t==null||t(e);return}const i=new Image,{srcset:n,src:c,sizes:o}=e.dataset;if(o==="auto"){const u=p(e);u&&(i.sizes=`${u}px`)}else e.sizes&&(i.sizes=e.sizes);n&&(i.srcset=n),c&&(i.src=c),i.addEventListener("load",()=>{E(e),A(e),t==null||t(e)},{once:!0})}const d=new WeakMap;function l(e,t){var i;if(e.dataset.sizes!=="auto")return;const r=p(e);if(r&&(e.sizes=`${r}px`),((i=e.parentElement)==null?void 0:i.tagName.toLowerCase())==="picture"&&!(t!=null&&t.skipChildren)&&[...e.parentElement.getElementsByTagName("source")].forEach(n=>l(n,{skipChildren:!0})),t!=null&&t.updateOnResize){if(!d.has(e)){const n=C(()=>l(e),500),c=new ResizeObserver(n);d.set(e,c),c.observe(e)}return()=>{const n=d.get(e);n&&(n.disconnect(),d.delete(e))}}}function A(e){e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src"))}function E(e){e.dataset.srcset&&(e.srcset=e.dataset.srcset,e.removeAttribute("data-srcset"))}function _(e){const t=e.parentElement;(t==null?void 0:t.tagName.toLowerCase())==="picture"&&([...t.querySelectorAll("source[data-srcset]")].forEach(E),[...t.querySelectorAll("source[data-src]")].forEach(A))}function p(e){var t,r;return e instanceof HTMLSourceElement?(r=(t=e.parentElement)==null?void 0:t.getElementsByTagName("img")[0])==null?void 0:r.offsetWidth:e.offsetWidth}const T=Object.freeze({autoSizes:y,lazyLoad:z,loadImage:f});return(L=document.currentScript)!=null&&L.hasAttribute("init")&&z(),a.autoSizes=y,a.default=T,a.lazyLoad=z,a.loadImage=f,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),a}({});
